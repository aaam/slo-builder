---
definitions:
  - template: LatencySLO
    definition:
      name: AdminVerificationLatency90
      budget: 0.1
      requestClass: "1"
      total: |
        sum by (namespace, release) (
          rate(http_request_duration_seconds_count{app="payments-service", handler="Routes::AdminVerifications::Index"}[%s])
        )
      observation: |
        sum by (namespace, release) (
          rate(http_request_duration_seconds_bucket{app="payments-service", handler="Routes::AdminVerifications::Index", le="%s"}[%s])
        )
      labels:
        channel: alert-test

  - template: LatencySLO
    definition:
      name: AdminVerificationLatency99
      budget: 0.01
      requestClass: "2.5"
      total: |
        sum by (namespace, release) (
          rate(http_request_duration_seconds_count{app="payments-service", handler="Routes::AdminVerifications::Index"}[%s])
        )
      observation: |
        sum by (namespace, release) (
          rate(http_request_duration_seconds_bucket{app="payments-service", handler="Routes::AdminVerifications::Index", le="%s"}[%s])
        )
      labels:
        channel: alert-test
